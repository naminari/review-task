# PR Reviewer Assignment Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–µ—Ä–æ–≤ –Ω–∞ Pull Request'—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã.  
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è —Å—Ç–∞–∂—ë—Ä–∞ Backend (–æ—Å–µ–Ω–Ω—è—è –≤–æ–ª–Ω–∞ 2025).

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker  
- Docker Compose

### –ó–∞–ø—É—Å–∫

```bash
git clone https://github.com/naminari/review-task
cd review-task

make docker-up
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:8080**

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
make health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:

```json
{"status":"OK","db":"connected"}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
make test
```

### –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `make unit-test` | –ó–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤ |
| `make quick-test` | –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ) |
| `make examples` | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (**—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ `make quick-test`**) |
| `make integration-test` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã |

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:**  
> `make quick-test` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω **–¥–æ `make examples`**, –∏–Ω–∞—á–µ –ø—Ä–∏–º–µ—Ä—ã –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

---

## üìö API Endpoints

–°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç REST API –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ **OpenAPI 3.0** (—Å–º. `openapi.yaml`).

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º–∏

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| POST | `/team/add` | –°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É |
| GET | `/team/get` | –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–∞–Ω–¥–µ |

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| POST | `/users/setIsActive` | –ò–∑–º–µ–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/users/getReview` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ PR, –≥–¥–µ –æ–Ω —Ä–µ–≤—å—é–µ—Ä |

### Pull Request'—ã

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| POST | `/pullRequest/create` | –°–æ–∑–¥–∞—Ç—å PR –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–µ–≤—å—é–µ—Ä–æ–≤ |
| POST | `/pullRequest/merge` | –ú–µ—Ä–¥–∂–∏—Ç—å PR |
| POST | `/pullRequest/reassign` | –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–µ–≤—å—é–µ—Ä–∞ |

### Healthcheck

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| GET | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞ |

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–µ–∫ |
|-----------|------|
| –Ø–∑—ã–∫ | Go 1.21+ |
| Web framework | Gin |
| –ë–î | PostgreSQL |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | Docker + Docker Compose |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
review-task/
‚îú‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ openapi.yaml
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ migrations/
‚îú‚îÄ‚îÄ handlers/
‚îú‚îÄ‚îÄ service/
‚îú‚îÄ‚îÄ repository/
‚îú‚îÄ‚îÄ models/
‚îú‚îÄ‚îÄ database/
‚îî‚îÄ‚îÄ scripts/
```

---

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
make run           # –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker
make build         # —Å–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
make docker-logs   # –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
make docker-down   # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
```

–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ë–î:

```bash
make docker-down
docker volume rm review-task_postgres_data
```

---

## üìä –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–æ–≤

- –ù–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –¥–æ **2 –∞–∫—Ç–∏–≤–Ω—ã—Ö** —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ—Ä–∞
- –ê–≤—Ç–æ—Ä PR **–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–≤—å—é–µ—Ä–æ–º**
- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ (is_active = false) –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è
- –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–∞–Ω–¥–∏–¥–∞—Ç ‚Äî –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –æ–¥–∏–Ω

### –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–æ–≤

- –†–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ PR **–Ω–µ —Å–º–µ—Ä–∂–µ–Ω**
- –ù–æ–≤—ã–π —Ä–µ–≤—å—é–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ —Å—Ä–µ–¥–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã

### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ `/merge` ‚Äî –±–µ–∑–æ–ø–∞—Å–µ–Ω –∏ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ

---

## üõë –û—à–∏–±–∫–∏

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----|----------|
| `TEAM_EXISTS` | –ö–æ–º–∞–Ω–¥–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç |
| `PR_EXISTS` | PR —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç |
| `PR_MERGED` | PR —É–∂–µ —Å–º–µ—Ä–∂–µ–Ω |
| `NOT_ASSIGNED` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–≤—å—é–µ—Ä–æ–º |
| `NOT_FOUND` | –û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω |

---

## üê≥ Docker

`.env` –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

```env
DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=review_service

APP_PORT=8080
GIN_MODE=release
```

–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

---

## ‚úîÔ∏è –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –í—ã–ø–æ–ª–Ω–µ–Ω–æ |
|------------|----------|
| 7 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | ‚úÖ |
| –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ OpenAPI | ‚úÖ |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–æ–≤ | ‚úÖ |
| Docker Compose + –º–∏–≥—Ä–∞—Ü–∏–∏ | ‚úÖ |
| Unit + Integration —Ç–µ—Å—Ç—ã | ‚úÖ |

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ **~20 –∫–æ–º–∞–Ω–¥ / ~200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- –°—Ä–µ–¥–Ω–∏–π –æ—Ç–∫–ª–∏–∫: **< 300ms**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã PostgreSQL

---

### üèÅ –°—Ç–∞—Ç—É—Å

–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à—ë–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è —Å—Ç–∞–∂—ë—Ä–∞ Backend (–æ—Å–µ–Ω—å 2025).


